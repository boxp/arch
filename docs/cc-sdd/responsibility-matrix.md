# cc-sdd 責務分担（RACI Matrix）

本ドキュメントはcc-sddワークフローにおける各アクティビティの責務分担を定義する。

## RACI凡例

| 記号 | 意味 | 説明 |
|------|------|------|
| R | Responsible（実行責任） | 実際にアクティビティを実行する |
| A | Accountable（説明責任） | 最終的な承認/判断を行う |
| C | Consulted（相談先） | 実行前に相談される |
| I | Informed（報告先） | 結果を通知される |

## ロール定義

| ロール | 担当者 | 説明 |
|--------|--------|------|
| タスク起案者 | 人間（プロジェクトオーナー） | 要件定義・タスク指示書の作成、完了条件の明記 |
| AIエージェント | OpenClaw上のClaude Code | plan.md作成、実装、Codexレビュー対応、CI通過、PR作成 |
| Codex | chatgpt-codex-connector | 自動コードレビュー（品質・パターン準拠チェック） |
| CI | GitHub Actions | ビルド・テスト・lint・型チェック |
| レビュアー | 人間（タスク起案者 or 指名されたレビュアー） | PR最終承認、アーキテクチャ判断、セキュリティ確認 |

## ワークフロー別 RACI Matrix

### cc-sddの7ステップ

| アクティビティ | タスク起案者 | AIエージェント | Codex | CI | レビュアー |
|---------------|-------------|---------------|-------|-----|-----------|
| **Step 1: Steering** | | | | | |
| AGENTS.md/CONTRIBUTING.md更新判断 | A | R | - | - | C |
| ステアリング鮮度の監視 | I | R | - | - | - |
| **Step 2: Spec Initiation** | | | | | |
| タスク指示書作成 | R/A | - | - | - | I |
| plan.md作成 | C | R/A | - | - | I |
| **Step 3: Requirements** | | | | | |
| 概要・スコープ定義 | A | R | - | - | C |
| 観測指標・リスク記述 | C | R/A | - | - | I |
| **Step 4: Design** | | | | | |
| 実装計画策定 | C | R/A | - | - | I |
| ファイル変更一覧の特定 | - | R/A | - | - | - |
| **Step 5: Implementation** | | | | | |
| コード実装 | - | R/A | - | - | - |
| Codexレビュー対応 | - | R | A | - | - |
| CI通過 | - | R | - | A | - |
| **Step 6: Quality Gate** | | | | | |
| PR作成 | - | R | - | - | A |
| 品質基準チェック | - | R | R | R | A |
| **Step 7: Human Review** | | | | | |
| PRレビュー・承認 | I | - | - | - | R/A |
| マージ判断 | I | - | - | - | R/A |

### 指標計測・レポート

| アクティビティ | タスク起案者 | AIエージェント | Codex | CI | レビュアー |
|---------------|-------------|---------------|-------|-----|-----------|
| 週次指標収集 | I | R/A | - | - | - |
| 週次レポート作成 | I | R/A | - | - | - |
| 月次指標収集 | I | R/A | - | - | - |
| ベースライン確定 | A | R | - | - | C |
| 目標値見直し（四半期） | A | C | - | - | R |
| ガイドライン改訂 | A | R | - | - | C |

### 異常時対応

本プロジェクトでは目標値とアラート閾値を二段階で運用する。目標値は「達成を目指す水準」、アラート閾値は「即座に対応が必要な警戒ライン」として区別する。

| 指標 | 目標値 | アラート閾値 | 意図 |
|------|--------|-------------|------|
| CI成功率 | >85% | <80% | 85%未満は改善検討、80%未満は即時対応 |
| 変更失敗率 | <5% | >10% | 5%超は改善検討、10%超は品質ゲート強化 |
| ステアリング鮮度 | <30日 | >30日 | 30日超でステアリングドキュメント見直し |

| アクティビティ | タスク起案者 | AIエージェント | Codex | CI | レビュアー |
|---------------|-------------|---------------|-------|-----|-----------|
| CI成功率 <80% 検知 | I | R | - | - | A |
| 変更失敗率 >10% 検知 | A | R | - | - | C |
| ステアリング鮮度 >30日 検知 | I | R | - | - | A |
| エスカレーション | A | R | - | - | C |

## 責務の境界

### AIエージェントが判断してよい範囲

- plan.md内の技術設計詳細
- 実装方法の選択（複数候補がある場合は計画書に理由を明記）
- Codexレビュー指摘への対応方法
- CI失敗時の修正方針

### 人間の判断が必要な範囲

- スコープ外への拡張判断
- セキュリティに影響する設計変更
- 外部サービスとの新規連携
- 指標の目標値変更
- ガイドライン自体の大幅改訂
