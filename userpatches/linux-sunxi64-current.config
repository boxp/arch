# Armbian kernel configuration for Calico support
# This file adds Netfilter xt_set and IP set modules required by Calico
# to the Orange Pi Zero 3 (sunxi64) current kernel build

# Core Netfilter xt_set support
CONFIG_NETFILTER_XT_SET=m
CONFIG_NETFILTER_XT_MATCH_SET=m

# IP set support for Calico IPAM
CONFIG_IP_SET=m
CONFIG_IP_SET_MAX=256
CONFIG_IP_SET_HASH_IP=m
CONFIG_IP_SET_HASH_NET=m
CONFIG_IP_SET_HASH_IPPORT=m
CONFIG_IP_SET_HASH_NETPORT=m
CONFIG_IP_SET_LIST_SET=m

# Additional IP set types that may be used by Calico
CONFIG_IP_SET_HASH_MAC=m
CONFIG_IP_SET_BITMAP_IP=m
CONFIG_IP_SET_BITMAP_IPMAC=m
CONFIG_IP_SET_BITMAP_PORT=m

# kernel名に-dirtyをつけないための設定
CONFIG_LOCALVERSION=""
CONFIG_LOCALVERSION_AUTO=n

# Module.symvars生成のため有効化
CONFIG_MODULES=y

# --- initramfs gzip support -----------------
CONFIG_RD_GZIP=y
CONFIG_INITRAMFS_COMPRESSION_GZIP=y